<script setup>
import { Head, Link } from '@inertiajs/vue3'
import Pagination from '@/Components/Pagination.vue'
import DashboardLayout from "../Layouts/DashboardLayout.vue"

const props = defineProps({
    visits: { type: Object, required: true }
})
</script>

<template>
    <Head title="–ó–∞–¥–∞–Ω–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤" />
    <DashboardLayout>
        <h1 class="mb-6 text-xl font-semibold text-graphite">
            –ó–∞–¥–∞–Ω–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
        </h1>

        <!-- —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ -->
        <ul v-if="props.visits.data.length" role="list" class="space-y-4">
            <li
                v-for="v in props.visits.data"
                :key="v.id"
                class="rounded-xl bg-white shadow hover:shadow-md transition border border-gray-100 overflow-hidden"
            >
                <div class="p-5">
                    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                    <h2 class="text-lg font-semibold text-graphite mb-2">
                        {{ v.title }}
                    </h2>

                    <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                    <p class="text-sm text-gray-600">
                        {{ v.description }}
                    </p>

                    <!-- –°—Ç–∞—Ç—É—Å + –ø—Ä–æ—Å–º–æ—Ç—Ä—ã -->
                    <div class="mt-4 flex items-center justify-between">
      <span
          :class="[
          'px-2 py-1 rounded-full text-xs font-medium',
          v.status === 'on'  ? 'bg-mint text-graphite' :
          v.status === 'ban' ? 'bg-red-100 text-red-700' :
                               'bg-gray-100 text-gray-700'
        ]"
      >
        {{ v.status }}
      </span>
                        <span class="text-sm text-gray-700 font-medium">
        üëÅ {{ v.views }}
      </span>
                    </div>
                </div>

                <!-- –î–µ–π—Å—Ç–≤–∏–µ -->
                <div class="px-5 py-4 border-t border-gray-100 bg-gray-50 flex justify-end">
                    <Link
                        :href="route('visits.perform', v.id)"
                        class="inline-flex items-center gap-2 rounded-lg
             bg-graphite px-4 py-2 text-sm font-medium text-mint
             shadow hover:bg-mint hover:text-graphite transition"
                    >
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </Link>
                </div>
            </li>

        </ul>

        <!-- –µ—Å–ª–∏ –ø—É—Å—Ç–æ -->
        <div v-else class="text-center py-12 text-gray-500 text-sm">
            –ù–ï–¢ –ó–ê–î–ê–ù–ò–ô –ü–†–û–°–ú–û–¢–†–û–í
        </div>

        <!-- –ø–∞–≥–∏–Ω–∞—Ü–∏—è -->
        <div class="mt-6">
            <Pagination :links="visits.links" />
        </div>
    </DashboardLayout>
</template>
